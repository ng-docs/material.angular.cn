<html><head></head><body><div class="docs-markdown"><h1 class="docs-markdown-h1" id="scroll-strategies" translation-result="on">滚动策略</h1><h1 class="docs-markdown-h1" translation-origin="off">Scroll strategies</h1><h2 class="docs-markdown-h2" id="what-is-a-scroll-strategy" translation-result="on">什么是滚动策略？</h2><h2 class="docs-markdown-h2" translation-origin="off">What is a scroll strategy?</h2><p class="docs-markdown-p" translation-result="on">滚动策略是一种描述浮层处于打开状态时，当用户滚动浮层的行为方式。该策略带有一个 <code class="docs-markdown-code">OverlayRef</code> 的引用，这样它就可以重新计算位置、关闭浮层、阻止滚动等。</p><p class="docs-markdown-p" translation-origin="off">A scroll strategy is a way of describing how an overlay should behave if the user scrolls while the overlay is open. The strategy has a reference to the <code class="docs-markdown-code">OverlayRef</code>, allowing it to recalculate the position, close the overlay, block scrolling, etc.</p><h2 class="docs-markdown-h2" id="usage" translation-result="on">用法</h2><h2 class="docs-markdown-h2" translation-origin="off">Usage</h2><p class="docs-markdown-p" translation-result="on">要把浮层与滚动策略相关联，就必须把一个返回滚动策略的函数传递给 <code class="docs-markdown-code">OverlayConfig</code> 。默认情况下，所有浮层都会使用 <code class="docs-markdown-code">noop</code> 策略，它不执行任何操作。其它可用的策略有 <code class="docs-markdown-code">reposition</code>、<code class="docs-markdown-code">block</code> 和 <code class="docs-markdown-code">close</code>：</p><p class="docs-markdown-p" translation-origin="off">To associate an overlay with a scroll strategy, you have to pass in a function, that returns a scroll strategy, to the <code class="docs-markdown-code">OverlayConfig</code>. By default, all overlays will use the <code class="docs-markdown-code">noop</code> strategy which doesn't do anything. The other available strategies are <code class="docs-markdown-code">reposition</code>, <code class="docs-markdown-code">block</code> and <code class="docs-markdown-code">close</code>:</p><pre class="docs-markdown-pre"><code class="lang-ts docs-markdown-code"><span class="hljs-keyword">let</span> overlayConfig = <span class="hljs-keyword">new</span> OverlayConfig({
  scrollStrategy: overlay.scrollStrategies.block()
});

<span class="hljs-keyword">this</span>._overlay.create(overlayConfig).attach(yourPortal);
</code></pre><h2 class="docs-markdown-h2" id="creating-a-custom-scroll-strategy" translation-result="on">创建自定义滚动策略</h2><h2 class="docs-markdown-h2" translation-origin="off">Creating a custom scroll strategy</h2><p class="docs-markdown-p" translation-result="on">要设置自定义滚动策略，你必须创建一个实现 <code class="docs-markdown-code">ScrollStrategy</code> 接口的类。滚动策略的生命周期分为三个阶段：</p><p class="docs-markdown-p" translation-origin="off">To set up a custom scroll strategy, you have to create a class that implements the <code class="docs-markdown-code">ScrollStrategy</code> interface. There are three stages of a scroll strategy's life cycle:</p><ol class="docs-markdown-ol"><li class="docs-markdown-li"><p class="docs-markdown-p" translation-result="on">在创建浮层的时候，会调用该策略的 <code class="docs-markdown-code">attach</code> 方法并传入浮层自身的引用。</p><p class="docs-markdown-p" translation-origin="off">When an overlay is created, it'll call the strategy's <code class="docs-markdown-code">attach</code> method with a reference to itself.</p></li><li class="docs-markdown-li"><p class="docs-markdown-p" translation-result="on">当浮层附加到 DOM 中时，它会调用其滚动策略中的 <code class="docs-markdown-code">enable</code> 方法，</p><p class="docs-markdown-p" translation-origin="off">When an overlay is attached to the DOM, it'll call the <code class="docs-markdown-code">enable</code> method on its scroll strategy,</p></li><li class="docs-markdown-li"><p class="docs-markdown-p" translation-result="on">当一个浮层从 DOM 中分离出来或者被销毁时，它会调用滚动策略的 <code class="docs-markdown-code">disable</code> 方法，让它在自己清理完之后做一些清理工作。</p><p class="docs-markdown-p" translation-origin="off">When an overlay is detached from the DOM or destroyed, it'll call the <code class="docs-markdown-code">disable</code> method on its scroll strategy, allowing it to clean up after itself.</p></li></ol><p class="docs-markdown-p" translation-result="on">之后你可以把这个新的滚动策略传给浮层了：</p><p class="docs-markdown-p" translation-origin="off">Afterwards you can pass in the new scroll strategy to your overlay state:</p><pre class="docs-markdown-pre"><code class="lang-ts docs-markdown-code"><span class="hljs-comment">// Your custom scroll strategy.</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> CustomScrollStrategy <span class="hljs-keyword">implements</span> ScrollStrategy {
  <span class="hljs-comment">// your implementation</span>
}

overlayConfig.scrollStrategy = <span class="hljs-keyword">new</span> CustomScrollStrategy();
<span class="hljs-keyword">this</span>._overlay.create(overlayConfig).attach(yourPortal);
</code></pre></div></body></html>