<div class="docs-markdown"><p data-ng_translator_product="100" data-ng_translator_ref_id="5dyz1d6cn3kx11ruwzb4yf0e5"><code>&lt;mat-select&gt;</code> 是一个表单控件，像原生的 <code>&lt;select&gt;</code> 元素一样，它用于从一组选项中选取一个值。
你可以阅读 <a href="https://material.io/design/components/menus.html">Material Design 规范</a>了解更多信息。
它被设计成在 <a href="guide/overview"><code>&lt;mat-form-field&gt;</code></a> 元素内部使用的。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="6feqanfgn3lwvfa5jtdiiog5a">要想往选择框中添加选项，请为 <code>&lt;mat-select&gt;</code> 添加 <code>&lt;mat-option&gt;</code> 元素。每个 <code>&lt;mat-option&gt;</code> 都有一个 <code>value</code> 属性，用于给出当用户选择了该选项时的结果值，而 <code>&lt;mat-option&gt;</code> 的内容则会显示给用户。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="ebkckgvz66vcmsesim1lzi932">Angular Material 还支持在 <code>&lt;mat-form-field&gt;</code> 中使用原生的 <code>&lt;select&gt;</code> 元素。
这种原生控件在性能、无障碍性、可用性等方面具有一系列优点。参见 <a href="https://material.angular.cn/components/form-field">form-field 的文档</a>以了解详情。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="7r9a0d34vls91tt6zfvbqcnln">要在 <code>&lt;mat-form-field&gt;</code> 中使用原生 select，请为 <code>&lt;select&gt;</code> 元素添加 <code>matNativeControl</code> 属性。</p>
<div material-docs-example="select-overview"></div>


        <h3 id="getting-and-setting-the-select-value" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="1ipzwfi66abcms8ef17t7q6zs">获取与设置选择框的值</h3>
      <p data-ng_translator_product="100" data-ng_translator_ref_id="aucjuqbattn2lfttoh9ivbx35"><code>&lt;mat-select&gt;</code> 支持对 <code>value</code> 属性进行双向绑定，而不需要借助 Angular 的表单支持。</p>
<div material-docs-example="select-value-binding"></div>

<p data-ng_translator_product="100" data-ng_translator_ref_id="eys97wsnz42nv7gike9itsm"><code>&lt;mat-select&gt;</code> 也支持所有的表单指令，包括来自 <code>FormsModule</code> 的 <code>NgModel</code> 和来自 <code>ReactiveFormsModule</code> 的 <code>FormControl</code>、<code>FormGroup</code> 等。像原生的 <code>&lt;select&gt;</code> 一样，<code>&lt;mat-select&gt;</code> 也支持 <code>compareWith</code> 函数。（要了解自定义 <code>compareWith</code> 的方法，参见 <a href="https://angular.cn/api/forms/SelectControlValueAccessor#caveat-option-selection">Angular 表单文档</a>。）</p>
<div material-docs-example="select-form"></div>


        <h3 id="form-field-features" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="51w5wkynr5kyilpbjki1ev4fw">表单字段的特性</h3>
      <p data-ng_translator_product="100" data-ng_translator_ref_id="c2726mfnfdi6071hq55hho7n4"><code>&lt;mat-form-field&gt;</code> 的几个特性可以和任何 <code>&lt;mat-select&gt;</code> 一起使用。包括：错误信息、提示信息、前缀与后缀、主题。
欲知详情，参见<a href="guide/overview">表单字段的文档</a>。</p>
<div material-docs-example="select-hint-error"></div>


        <h3 id="setting-a-static-placeholder" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="f2r1czckntbrnu1gq8uc5ln9i">设置静态占位符</h3>
      <p data-ng_translator_product="100" data-ng_translator_ref_id="6vctwpqp04ctbre6v16tmzxzz">占位符是指当 <code>&lt;mat-form-field&gt;</code> 浮起，但 <code>&lt;mat-select&gt;</code> 为空时显示的文本。
它可以给用户提供一些关于如何进行选择的额外信息。
占位符可以通过 <code>&lt;mat-select&gt;</code> 元素上的 <code>placeholder</code> 属性来指定。
有些情况下，<code>&lt;mat-form-field&gt;</code> 可以把占位符用作标签（参见<a href="guide/overview#floating-label">表单字段文档</a>）。</p>

        <h3 id="disabling-the-select-or-individual-options" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="9r51huixsow8p6e19hnhmxnbl">禁用选择框或其中的某个选项</h3>
      <p data-ng_translator_product="100" data-ng_translator_ref_id="4yzwt3h0tni1edw6zt4quh119">可以通过 <code>&lt;mat-select&gt;</code> 上的 <code>disabled</code> 属性禁用整个选择框，或通过 <code>&lt;mat-option&gt;</code> 上的 <code>disabled</code> 属性单独禁用某一个选项。
当在响应式表单中使用时，选择框组件可以通过表单控件进行启用/禁用。
这可以通过创建一个带有 disabled 属性的 <code>FormControl</code>（<code>FormControl({value: '', disabled: true})</code>）来完成，也可以使用 <code>FormControl.enable()</code> 或 <code>FormControl.disable()</code></p>
<div material-docs-example="select-disabled"></div>


        <h3 id="resetting-the-select-value" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="3efwnv6gryd0s3u7z1lqgafin">重置选择框的值</h3>
      <p data-ng_translator_product="100" data-ng_translator_ref_id="4zry0279lw0n93xkzge0yuhfp">如果你希望用某个选项重置选择框的值，那么可以省略它的值。</p>
<div material-docs-example="select-reset"></div>


        <h3 id="creating-groups-of-options" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="aqbt00lmmbp3w5pie6bys9pte">创建选项组</h3>
      <p data-ng_translator_product="100" data-ng_translator_ref_id="b8j3vbl9lxb1e23atb52arfrx"><code>&lt;mat-optgroup&gt;</code> 元素可以用来把一些选项分组到子标题下。组的名字可以用 <code>&lt;mat-optgroup&gt;</code> 的 <code>label</code> 来指定。
像 <code>&lt;mat-option&gt;</code> 元素一样，<code>&lt;mat-optgroup&gt;</code> 也能通过设置组的 <code>disabled</code> 属性来禁用或启用。</p>
<div material-docs-example="select-optgroup"></div>


        <h3 id="multiple-selection" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="8h0jc6eg6bcgcyatxd50vipf4">多选</h3>
      <p data-ng_translator_product="100" data-ng_translator_ref_id="3xa0nmjpj6ygqhcsq1338gixw"><code>&lt;mat-select&gt;</code> 默认为单选模式，但是可以通过 <code>multiple</code> 属性配置成允许多选的，这样用户就可以同时选择多个值了。
当在多选模式下使用 <code>&lt;mat-select&gt;</code> 时，它的值将会是所有选定值的有序列表，而不再是单个值。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="1mr6lblk00cz8qq0ilmo8kctf">不鼓励在 <code>&lt;mat-form-field&gt;</code> 中使用原生选择框（<code>&lt;select multiple&gt;</code>）来实现多选功能，因为内联的多项选择框在外观上会与其它 Material 组件不一致。</p>
<div material-docs-example="select-multiple"></div>


        <h3 id="customizing-the-trigger-label" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="7ibav8bnakts8d22sydupzjkh">定制触发器标签</h3>
      <p data-ng_translator_product="100" data-ng_translator_ref_id="v4gzddsg8hsf9qbd41yxpofy">如果你想在选择框内部显示一个自定义的触发器标签，可以使用 <code>&lt;mat-select-trigger&gt;</code> 元素。</p>
<div material-docs-example="select-custom-trigger"></div>


        <h3 id="disabling-the-ripple-effect" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="24vm1og6scky7i5ujzpkd31u8">禁用涟漪效果</h3>
      <p data-ng_translator_product="100" data-ng_translator_ref_id="43idi62w2wofree2a55wez2ia">默认情况下，当用户点击某个 <code>&lt;mat-option&gt;</code> 时，就会显示一个涟漪动画。可以通过设置 <code>&lt;mat-select&gt;</code> 上的 <code>disableRipple</code> 属性来禁用它。</p>
<div material-docs-example="select-no-ripple"></div>


        <h3 id="adding-custom-styles-to-the-dropdown-panel" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="3r2o4b3vylebkg2sxgesdv91n">为下拉面板添加自定义样式</h3>
      <p data-ng_translator_product="100" data-ng_translator_ref_id="f0vfudt4o7nasttgo0l6l2efr">为了便于给下拉面板指定样式，<code>&lt;mat-select&gt;</code> 有一个 <code>panelClass</code> 属性，可用于为下拉面板指定自定义 CSS 类。</p>
<div material-docs-example="select-panel-class"></div>


        <h3 id="changing-when-error-messages-are-shown" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="9bt00988ej4b3xo6g3uwcqa7c">修改错误信息的显示时机</h3>
      <p data-ng_translator_product="100" data-ng_translator_ref_id="5uilprkvit6a55mp6a7tezg1n"><code>&lt;mat-form-field&gt;</code> 让你能把<a href="guide/overview#error-messages">错误信息</a>和你的 <code>&lt;mat-select&gt;</code> 关联起来。
默认情况下，当该控件无效并且用户已经跟它交互过（碰过 touched）或者提交过父表单时才会显示这些错误信息。
如果你要覆盖这种行为（比如当无效控件或父表单组变脏时想尽快显示错误信息），可以使用 <code>&lt;mat-select&gt;</code> 的 <code>errorStateMatcher</code> 属性。
该属性接收一个 <code>ErrorStateMatcher</code> 对象的实例。<code>ErrorStateMatcher</code> 必须实现一个 <code>isErrorState</code> 方法，它接受该 <code>&lt;mat-select&gt;</code> 或其父表单的 <code>FormControl</code>，并返回一个 <code>boolean</code> 值，以指出是否应该显示错误信息。（<code>true</code> 表示应该显示，<code>false</code> 表示不该。）</p>
<div material-docs-example="select-error-state-matcher"></div>

<p data-ng_translator_product="100" data-ng_translator_ref_id="5qktc5v6dht7krhcxdczbsbbj">全局的错误状态匹配器可以通过 <code>ErrorStateMatcher</code> 提供者来指定。它将作用于所有输入框。
为方便起见，可以使用 <code>ShowOnDirtyErrorStateMatcher</code> 作为全局配置，来要求只有当输入框是脏（dirty）且无效（invalid）时才显示错误信息。</p>
<pre><code class="language-ts"><span class="hljs-meta">@NgModule</span>({
  <span class="hljs-attr">providers</span>: [
    {<span class="hljs-attr">provide</span>: ErrorStateMatcher, <span class="hljs-attr">useClass</span>: ShowOnDirtyErrorStateMatcher}
  ]
})
</code></pre>

        <h3 id="keyboard-interaction" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="cbrztssap137sgktrlf2lr30o">键盘交互</h3>
      <table>
<thead>
<tr>
<th data-ng_translator_product="100" data-ng_translator_ref_id="863ede35wj8nw5s9y0a34i8kj">键盘快捷键</th>
<th data-ng_translator_product="100" data-ng_translator_ref_id="mrmhabmulen10w0rlhu0uhf">操作</th>
</tr>
</thead>
<tbody><tr>
<td><kbd data-ng_translator_product="100" data-ng_translator_ref_id="2nnyys53jprynpl0dun8dwhwu">下箭头</kbd></td>
<td data-ng_translator_product="100" data-ng_translator_ref_id="dw75vz6mt6vs4iizdyo79hpwu">导航到下一个选项。</td>
</tr>
<tr>
<td><kbd data-ng_translator_product="100" data-ng_translator_ref_id="309bucutagp7jselon3lyth1t">上箭头</kbd></td>
<td data-ng_translator_product="100" data-ng_translator_ref_id="8u6f91fdcb2xhg9fhblosao1b">导航到上一个选项。</td>
</tr>
<tr>
<td><kbd data-ng_translator_product="100" data-ng_translator_ref_id="eaqxyduesc434wq43zo3dxu6z">回车</kbd></td>
<td data-ng_translator_product="100" data-ng_translator_ref_id="209o76v4hbk07qzbq845wssaj">如果已关闭，则打开选择面板。如果已打开，则选择活动选项。</td>
</tr>
<tr>
<td><kbd data-ng_translator_product="100" data-ng_translator_ref_id="2nj7fks0e5arzg8a7dvuhs10">Esc</kbd></td>
<td data-ng_translator_product="100" data-ng_translator_ref_id="4pjfmos8eg6iwxoigvud74rpi">关闭选择面板。</td>
</tr>
<tr>
<td data-ng_translator_product="100" data-ng_translator_ref_id="kkn682vlqsvrc6qe12ieamdx"><kbd>Alt</kbd> + 
<kbd>上箭头</kbd></td>
<td data-ng_translator_product="100" data-ng_translator_ref_id="4pjfmos8eg6iwxoigvud74rpi">关闭选择面板。</td>
</tr>
<tr>
<td data-ng_translator_product="100" data-ng_translator_ref_id="agrm7ardnpdko8tsolrm4lqoh"><kbd>Alt</kbd> + 
<kbd>下箭头</kbd></td>
<td data-ng_translator_product="100" data-ng_translator_ref_id="8db7q6uq1687xq19g3a778bl1">如果存在任何匹配的选项，则打开选择面板。</td>
</tr>
</tbody></table>

        <h3 id="accessibility" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="55b8z3baik2ejxevaqhco84f8">无障碍性</h3>
      <p data-ng_translator_product="100" data-ng_translator_ref_id="cwo28owhfwcnb4sh4tuhk9oaw">如果可能，更推荐使用原生 <code>&lt;select&gt;</code> 元素而不是 <code>MatSelect</code> 。原生控件能在最广泛的平台上提供无障碍体验。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="ei2w5c0j5yqk2nfpg930awtwm"><code>MatSelect</code> 实现了 <a href="https://www.w3.org/TR/wai-aria-1.2">ARIA 规范 1.2 版</a>中详述的组合框模式。组合框触发器会控制在弹出窗口中打开的 <code>role="listbox"</code> 元素。以前版本的 ARIA 规范要求 <code>role="combobox"</code> 应用于文本输入控件，但规范的 1.2 版本支持更广泛的交互模式。 ARIA 的这种新用法适用于 Angular Material 支持的所有浏览器和屏幕阅读器组合。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="citsqiapj961uznuf4rwvi5tc">由于弹出窗口使用 <code>role="listbox"</code> 模式，因此<em>不应</em>将其他交互控件（例如按钮或复选框）放入选择选项中。如果这样嵌套可交互控件会干扰大多数辅助技术。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="2wls8bfvz4l5s0yyjpu4wfbko">始终要为选择框提供一个无障碍标签。这可以通过在 <code>&lt;mat-form-field&gt;</code> 中添加一个 <code>&lt;mat-label&gt;</code> 组件或 <code>aria-label</code>、<code>aria-labelledby</code> 属性来实现。</p>
<p data-ng_translator_product="100" data-ng_translator_ref_id="bzth2jzwohxcbzcvw519s0p8b">默认情况下， <code>MatSelect</code> 会显示一个选中标记来标识所选条目。 虽然你可以通过 <code>hideSingleSelectionIndicator</code> 来隐藏单选时的选中标记指示器，但这会使用户更难甚至不可能直观地识别所选条目，从而降低组件的无障碍性。</p>

        <h3 id="troubleshooting" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="c7ry1t3j7cdq937tdrii9thyh">排查问题</h3>
      
        <h4 id="error-cannot-change-multiple-mode-of-select-after-initialization" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="a8nb3zwgtlvydm3jv7xabrjlr">错误：初始化后无法更改选择器的 
<code>multiple</code> 模式</h4>
      <p data-ng_translator_product="100" data-ng_translator_ref_id="ati27eqv7n94z0ub5ccwi889z">如果你尝试将 
<code>&lt;mat-select&gt;</code> 上的 
<code>multiple</code> 属性绑定到动态值，就会抛出此错误。 （例如 
<code>[multiple]="isMultiple"</code>，其中 
<code>isMultiple</code> 的值在组件生命周期中发生变化）。如果你需要动态更改此属性，请使用 
<code>@if</code> 或 
<code>@switch</code> 代替：</p>
<pre><code class="language-html">@if (isMultiple) {
  <span class="hljs-tag">&lt;<span class="hljs-name">mat-select</span> <span class="hljs-attr">multiple</span>&gt;</span>
    ...
  <span class="hljs-tag">&lt;/<span class="hljs-name">mat-select</span>&gt;</span>
} @else {
  <span class="hljs-tag">&lt;<span class="hljs-name">mat-select</span>&gt;</span>
    ...
  <span class="hljs-tag">&lt;/<span class="hljs-name">mat-select</span>&gt;</span>
}
</code></pre>

        <h4 id="error-value-must-be-an-array-in-multiple-selection-mode" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="9omrlbee5fb5rqa2pihfhir9g">错误：在多选模式下，值必须是数组</h4>
      <p data-ng_translator_product="100" data-ng_translator_ref_id="bwhnnnd9bq0lgnnjz4evuqpdq">如果你试图给 <code>&lt;mat-select multiple&gt;</code> 赋值为除 <code>null</code>、<code>undefined</code> 或数组之外的值，就会抛出此错误。
比如，<code>mySelect.value = 'option1'</code> 就会出错，应该写成 <code>mySelect.value = ['option1']</code>。</p>

        <h4 id="error-comparewith-must-be-a-function" class="docs-header-link" data-ng_translator_product="100" data-ng_translator_ref_id="6wk5l6fpnq124mojhyugz254i">错误：
<code>compareWith</code> 必须是函数</h4>
      <p data-ng_translator_product="100" data-ng_translator_ref_id="81kva1k1pscwbey73jzjqrdqk">如果你尝试把函数之外的值赋给 <code>compareWith</code> 属性，就会出现此错误。要了解如何正确使用 <code>compareWith</code>，请参见 <a href="https://angular.cn/api/forms/SelectControlValueAccessor#caveat-option-selection">Angular 表单文档</a>。</p>
</div>